{"version":3,"file":"cross-window-emitter.min.js","sources":["../node_modules/.pnpm/@rollup+plugin-typescript@11.1.6_rollup@4.13.0_tslib@2.6.2_typescript@5.4.3/node_modules/tslib/tslib.es6.js","../node_modules/.pnpm/emitter-pro@1.0.3/node_modules/emitter-pro/dist/emitter-pro.esm.js","../node_modules/.pnpm/cache2@2.0.3/node_modules/cache2/dist/cache2.esm.js","../src/index.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    function next() {\r\n        while (env.stack.length) {\r\n            var rec = env.stack.pop();\r\n            try {\r\n                var result = rec.dispose && rec.dispose.call(rec.value);\r\n                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n};\r\n","var EmitterPro = /** @class */ (function () {\n    function EmitterPro() {\n        this.handler = {};\n    }\n    EmitterPro.prototype.eventNames = function () {\n        return Object.keys(this.handler);\n    };\n    EmitterPro.prototype.listeners = function (eventName) {\n        return this.handler[eventName] || [];\n    };\n    EmitterPro.prototype.hasListener = function (eventName, listener) {\n        return this.listeners(eventName).some(function (item) { return item === listener; });\n    };\n    EmitterPro.prototype.on = function (eventName, listener) {\n        if (!this.handler[eventName]) {\n            this.handler[eventName] = [listener];\n        }\n        else {\n            // 不允许添加相同的方法\n            if (!this.hasListener(eventName, listener)) {\n                this.handler[eventName].push(listener);\n            }\n        }\n        return this;\n    };\n    EmitterPro.prototype.off = function (eventName, listener) {\n        if (this.handler[eventName]) {\n            if (typeof listener === 'function') {\n                this.handler[eventName] = this.handler[eventName].filter(function (item) { return item !== listener; });\n            }\n            else {\n                delete this.handler[eventName];\n            }\n        }\n        return this;\n    };\n    EmitterPro.prototype.emit = function (eventName) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var listeners = this.listeners(eventName);\n        if (listeners.length > 0) {\n            listeners.forEach(function (listener) {\n                // eslint-disable-next-line prefer-spread\n                listener.apply(void 0, args);\n            });\n            return true;\n        }\n        return false;\n    };\n    EmitterPro.prototype.once = function (eventName, listener) {\n        var _this = this;\n        var wrap = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            // eslint-disable-next-line prefer-spread\n            listener.apply(void 0, args);\n            _this.off(eventName, wrap);\n        };\n        return this.on(eventName, wrap);\n    };\n    EmitterPro.prototype.offAll = function () {\n        this.handler = {};\n        return this;\n    };\n    return EmitterPro;\n}());\n\nexport { EmitterPro as default };\n","import { __assign, __extends } from 'tslib';\nimport Emitter from 'emitter-pro';\n\n// 随机字符串\nfunction randomString() {\n    return Math.random().toString(16).substring(2, 8);\n}\n// 内部自增id\nvar uid = 1;\n// 返回唯一标识\nfunction getUniqueId(id) {\n    return typeof id === 'string' && id ? id : \"\".concat(randomString(), \"_\").concat(uid++);\n}\n// 是否支持 storage\nfunction isStorageSupported(storage) {\n    try {\n        var isSupport = typeof storage === 'object' &&\n            storage !== null &&\n            !!storage.setItem &&\n            !!storage.getItem &&\n            !!storage.removeItem;\n        if (isSupport) {\n            var key = getUniqueId();\n            var value = '1';\n            storage.setItem(key, value);\n            if (storage.getItem(key) !== value) {\n                return false;\n            }\n            storage.removeItem(key);\n        }\n        return isSupport;\n    }\n    catch (e) {\n        console.error(\"[cache2] \".concat(storage, \" is not supported. The default memory cache will be used.\"));\n        return false;\n    }\n}\nfunction parse(value, reviver) {\n    try {\n        return JSON.parse(value, reviver);\n    }\n    catch (e) {\n        return value;\n    }\n}\nfunction stringify(value, replacer) {\n    return JSON.stringify(value, replacer);\n}\nvar inWindow = typeof window !== 'undefined' && typeof window === 'object' && window.window === window;\n\nvar cache = {};\nvar memoryStorage = {\n    getItem: function (key) {\n        return key in cache ? cache[key] : null;\n    },\n    setItem: function (key, value) {\n        cache[key] = value;\n    },\n    removeItem: function (key) {\n        delete cache[key];\n    }\n};\n\nvar Storage = /** @class */ (function () {\n    function Storage(storage, options) {\n        if (options === void 0) { options = {}; }\n        var isSupported = storage ? isStorageSupported(storage) : false;\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        this.storage = isSupported ? storage : memoryStorage;\n        this.isMemoryStorage = !isSupported || storage === memoryStorage;\n        this.options = __assign({ needParsed: !this.isMemoryStorage }, options);\n        this.keyPrefix =\n            'prefix' in options ? String(options.prefix) : isSupported ? '' : getUniqueId();\n        this._keys = [];\n    }\n    Storage.prototype.getKey = function (key) {\n        return this.keyPrefix + key;\n    };\n    Storage.prototype.get = function (key) {\n        var k = this.getKey(key);\n        var data = this.storage.getItem(k);\n        return this.options.needParsed ? parse(data, this.options.reviver) : data;\n    };\n    Storage.prototype.set = function (key, data) {\n        var k = this.getKey(key);\n        this.storage.setItem(k, this.options.needParsed ? stringify(data, this.options.replacer) : data);\n        if (this.isMemoryStorage) {\n            // 内部标记\n            this._keys.push(key);\n        }\n    };\n    Storage.prototype.del = function (key) {\n        var k = this.getKey(key);\n        this.storage.removeItem(k);\n        if (this.isMemoryStorage) {\n            this._keys = this._keys.filter(function (item) { return item !== key; });\n        }\n    };\n    Storage.prototype.clear = function () {\n        var _this = this;\n        if (typeof this.storage.clear === 'function') {\n            this.storage.clear();\n        }\n        else if (this.isMemoryStorage) {\n            this._keys.forEach(function (key) {\n                _this.del(key);\n            });\n        }\n    };\n    return Storage;\n}());\n\nvar defaultPrefix = 'cache2_';\nvar defaultNamespace = 'default';\nvar Cache = /** @class */ (function (_super) {\n    __extends(Cache, _super);\n    function Cache(namespace, options) {\n        var _this = _super.call(this) || this;\n        var k, opts;\n        if (typeof namespace === 'string') {\n            k = namespace;\n        }\n        else if (typeof namespace === 'object') {\n            opts = namespace;\n        }\n        if (!opts && typeof options === 'object') {\n            opts = options;\n        }\n        _this.options = __assign({ max: -1, stdTTL: 0, maxStrategy: 'limited', checkperiod: 0, prefix: defaultPrefix }, opts);\n        _this.storage = new Storage(_this.options.storage, _this.options);\n        if (!_this.storage.isMemoryStorage && !k) {\n            k = defaultNamespace;\n        }\n        _this.cacheKey = getUniqueId(k);\n        _this.startCheckperiod();\n        return _this;\n    }\n    // 检查当前键值是否过期，如果过期将会自动删除\n    Cache.prototype._check = function (key, data) {\n        var ret = true;\n        if (data.t !== 0 && data.t < Date.now()) {\n            ret = false;\n            this.del(key);\n            this.emit('expired', key, data.v);\n        }\n        return ret;\n    };\n    Cache.prototype._wrap = function (value, ttl) {\n        var now = Date.now();\n        var currentTtl = typeof ttl === 'number' ? ttl : this.options.stdTTL;\n        var livetime = currentTtl > 0 ? now + currentTtl : 0;\n        return {\n            v: value,\n            t: livetime,\n            n: now\n        };\n    };\n    Cache.prototype._isLimited = function (len) {\n        return this.options.max > -1 && len >= this.options.max;\n    };\n    Cache.prototype._getReplaceKey = function (keys, cacheValues) {\n        var retkey = keys[0];\n        keys.forEach(function (key) {\n            if (cacheValues[key].t < cacheValues[retkey].t ||\n                (cacheValues[key].t === cacheValues[retkey].t && cacheValues[key].n < cacheValues[retkey].n)) {\n                retkey = key;\n            }\n        });\n        return retkey;\n    };\n    Object.defineProperty(Cache.prototype, \"cacheValues\", {\n        // 获取全部缓存数据，不处理过期数据和排序\n        get: function () {\n            return this.storage.get(this.cacheKey) || {};\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // 设置缓存数据\n    Cache.prototype.setCacheValues = function (values) {\n        this.storage.set(this.cacheKey, values);\n    };\n    // 从缓存中获取保存的值。如果未找到或已过期，则返回 undefined 。如果找到该值，则返回该值。\n    Cache.prototype.get = function (key) {\n        var data = this.cacheValues[key];\n        if (data && this._check(key, data)) {\n            return data.v;\n        }\n        return;\n    };\n    // 从缓存中获取多个保存的值。如果未找到或已过期，则返回一个空对象。如果找到该值，它会返回一个具有键值对的对象。\n    Cache.prototype.mget = function (keys) {\n        var _this = this;\n        var ret = {};\n        if (!Array.isArray(keys)) {\n            return ret;\n        }\n        var cacheValues = this.cacheValues;\n        keys.forEach(function (key) {\n            var data = cacheValues[key];\n            if (data && _this._check(key, data)) {\n                ret[key] = data.v;\n            }\n        });\n        return ret;\n    };\n    // 从缓存中获取全部保存的值。返回一个具有键值对的对象。\n    Cache.prototype.getAll = function () {\n        var keys = Object.keys(this.cacheValues);\n        return this.mget(keys);\n    };\n    // 设置键值对。设置成功返回 true 。\n    Cache.prototype.set = function (key, value, ttl) {\n        if (this.options.max === 0) {\n            return false;\n        }\n        var cacheValues = this.cacheValues;\n        var keys = Object.keys(cacheValues);\n        // 当前不存在该键值，并且数据量超过最大限制\n        if (!cacheValues[key] && this._isLimited(keys.length)) {\n            var validKeys = this.keys();\n            if (this._isLimited(validKeys.length)) {\n                // 如果最大限制策略是替换，将优先替换快过期的数据，如果都是一样的过期时间(0)，按照先入先出规则处理。\n                if (this.options.maxStrategy === 'replaced') {\n                    var replaceKey = this._getReplaceKey(validKeys, cacheValues);\n                    this.del(replaceKey);\n                }\n                else {\n                    // 如果是最大限制策略是不允许添加，返回 false 。\n                    return false;\n                }\n            }\n        }\n        cacheValues[key] = this._wrap(value, ttl);\n        this.setCacheValues(cacheValues);\n        this.emit('set', key, cacheValues[key].v);\n        return true;\n    };\n    // 设置多个键值对。全部设置成功返回 true 。\n    Cache.prototype.mset = function (keyValueSet) {\n        var _this = this;\n        // 该处不使用数组 some 方法，是因为不能某个失败，而导致其他就不在更新。\n        var ret = true;\n        keyValueSet.forEach(function (item) {\n            var itemSetResult = _this.set(item.key, item.value, item.ttl);\n            if (ret && !itemSetResult) {\n                ret = false;\n            }\n        });\n        return ret;\n    };\n    // 删除一个或多个键。返回已删除条目的数量。删除永远不会失败。\n    Cache.prototype.del = function (key) {\n        var _this = this;\n        var cacheValues = this.cacheValues;\n        var count = 0;\n        var keys = Array.isArray(key) ? key : [key];\n        keys.forEach(function (key) {\n            if (cacheValues[key]) {\n                count++;\n                var oldData = cacheValues[key];\n                delete cacheValues[key];\n                _this.emit('del', key, oldData.v);\n            }\n        });\n        if (count > 0) {\n            this.setCacheValues(cacheValues);\n        }\n        return count;\n    };\n    // 删除当前所有缓存。\n    Cache.prototype.clear = function () {\n        this.storage.del(this.cacheKey);\n    };\n    // 返回所有现有键的数组。\n    Cache.prototype.keys = function () {\n        var _this = this;\n        var cacheValues = this.cacheValues;\n        var keys = Object.keys(cacheValues);\n        return keys.filter(function (key) { return _this._check(key, cacheValues[key]); });\n    };\n    // 当前缓存是否包含某个键。\n    Cache.prototype.has = function (key) {\n        var data = this.cacheValues[key];\n        return !!(data && this._check(key, data));\n    };\n    // 获取缓存值并从缓存中删除键。\n    Cache.prototype.take = function (key) {\n        var ret;\n        var data = this.cacheValues[key];\n        if (data && this._check(key, data)) {\n            ret = data.v;\n            this.del(key);\n        }\n        return ret;\n    };\n    // 重新定义一个键的 ttl 。如果找到并更新成功，则返回 true 。\n    Cache.prototype.ttl = function (key, ttl) {\n        var cacheValues = this.cacheValues;\n        var data = cacheValues[key];\n        if (data && this._check(key, data)) {\n            cacheValues[key] = this._wrap(data.v, ttl);\n            return true;\n        }\n        return false;\n    };\n    // 获取某个键的 ttl 。\n    // 如果未找到键或已过期，返回 undefined 。\n    // 如果 ttl 为 0 ，返回 0 。\n    // 否则返回一个以毫秒为单位的时间戳，表示键值将过期的时间。\n    Cache.prototype.getTtl = function (key) {\n        var cacheValues = this.cacheValues;\n        var data = cacheValues[key];\n        if (data && this._check(key, data)) {\n            return cacheValues[key].t;\n        }\n        return;\n    };\n    // 获取某个键值的最后修改时间\n    // 如果未找到键或已过期，返回 undefined 。\n    // 否则返回一个以毫秒为单位的时间戳，表示键值将过期的时间。\n    Cache.prototype.getLastModified = function (key) {\n        var cacheValues = this.cacheValues;\n        var data = cacheValues[key];\n        if (data && this._check(key, data)) {\n            return cacheValues[key].n;\n        }\n        return;\n    };\n    // 启动定时校验过期数据\n    Cache.prototype.startCheckperiod = function () {\n        var _this = this;\n        // 触发全部缓存数据是否过期校验\n        this.keys();\n        if (this.options.checkperiod > 0) {\n            clearTimeout(this._checkTimeout);\n            this._checkTimeout = setTimeout(function () {\n                _this.startCheckperiod();\n            }, this.options.checkperiod);\n        }\n    };\n    // 停止定时校验过期数据\n    Cache.prototype.stopCheckperiod = function () {\n        clearTimeout(this._checkTimeout);\n    };\n    return Cache;\n}(Emitter));\n\nvar local = new Storage(inWindow ? window.localStorage : undefined);\n\nvar session = new Storage(inWindow ? window.sessionStorage : undefined);\n\nexport { Cache, Storage, Cache as default, local, session };\n","import { Cache } from 'cache2';\n\ntype Listener = (...args: any[]) => any;\n\n// 事件触发器缓存最长保留时间，轮询时间不能超过该时间一半\nconst MAX_EMITTER_TIME = 30 * 60 * 1000;\n\n// 处理程序\nconst handlers = {\n  data: {} as Record<string, { fn: Listener; timestamp: number }[]>,\n\n  // 添加处理程序\n  add(eventName: string, listener: Listener) {\n    if (!this.data[eventName]) {\n      this.data[eventName] = [];\n    }\n    this.data[eventName].push({\n      timestamp: Date.now(), // 注册或触发时间，如果该时间大于触发时间则不触发。\n      fn: listener\n    });\n  },\n\n  // 删除处理程序\n  remove(eventName: string, listener?: Listener) {\n    if (this.data[eventName] && listener) {\n      this.data[eventName] = this.data[eventName].filter((item) => item.fn !== listener);\n    } else {\n      this.data[eventName] = [];\n    }\n  },\n\n  // 获取处理程序\n  get(eventName: string) {\n    return this.data[eventName] || [];\n  },\n\n  // 是否还有处理程序\n  has(eventName: string) {\n    const eventList = this.get(eventName);\n    return eventList.length > 0;\n  }\n};\n\n// 触发器缓存\nconst emitterStorage = new Cache<{ timestamp: number; params: any[] }>(\n  '__private_cross_window_emitter__',\n  {\n    stdTTL: MAX_EMITTER_TIME,\n    storage: window.localStorage\n  }\n);\n\n// 运行\nconst run = (eventName: string, cb?: () => void) => {\n  return () => {\n    const curEmitter = emitterStorage.get(eventName);\n    const curHandlers = handlers.get(eventName);\n\n    if (curEmitter) {\n      curHandlers.forEach(({ timestamp, fn }, index) => {\n        if (timestamp < curEmitter.timestamp) {\n          cb?.();\n          curHandlers[index].timestamp = Date.now(); // 更新执行时间\n          fn.apply(null, curEmitter.params);\n        }\n      });\n    }\n  };\n};\n\n// 轮询管理\nconst polling = {\n  data: {} as Record<string, { timestamp: number; pollingInterval: number; timer: any }>,\n\n  // 开始轮询\n  start(eventName: string, fn: () => void, pollingInterval = 500) {\n    if (!eventName) {\n      return;\n    }\n\n    if (!this.data[eventName]) {\n      this.data[eventName] = {\n        timestamp: Date.now(), // 开始轮询时间\n        pollingInterval,\n        timer: null\n      };\n    }\n\n    const curPolling = this.data[eventName];\n    curPolling.pollingInterval = pollingInterval;\n    clearInterval(curPolling.timer);\n    curPolling.timer = setInterval(fn, pollingInterval);\n  },\n\n  // 停止轮询\n  stop(eventName: string) {\n    if (!eventName || !this.data[eventName]) {\n      return;\n    }\n    clearInterval(this.data[eventName].timer);\n  },\n\n  // 设置轮询时间\n  setPollingInterval(eventName: string, pollingInterval = 500) {\n    if (!eventName || !this.data[eventName] || !pollingInterval) {\n      return;\n    }\n\n    if (pollingInterval > MAX_EMITTER_TIME / 2) {\n      console.warn(`polling interval no more than ${MAX_EMITTER_TIME}.`);\n      pollingInterval = MAX_EMITTER_TIME / 2;\n    }\n\n    const curPolling = this.data[eventName];\n\n    clearInterval(curPolling.timer);\n    this.start(eventName, run(eventName), pollingInterval);\n  }\n};\n\n/**\n * 注册事件\n *\n * @param {string} eventName 事件名称\n * @param {function} listener 回调函数\n */\nconst on = (eventName: string, listener: Listener) => {\n  handlers.add(eventName, listener);\n  polling.start(eventName, run(eventName));\n};\n\n/**\n * 注册一次事件，执行后移除该监听方法\n *\n * @param {string} eventName 事件名称\n * @param {function} listener 回调函数\n */\nconst once = (eventName: string, listener: Listener) => {\n  let isRun = false; // 标识是否运行过函数\n  handlers.add(eventName, listener);\n  polling.start(eventName, () => {\n    if (isRun) {\n      handlers.remove(eventName, listener); // 移除该监听方法\n\n      if (!handlers.has(eventName)) {\n        polling.stop(eventName); // 如果没有处理程序，停止轮询\n      }\n    }\n\n    run(eventName, () => {\n      isRun = true;\n    })();\n  });\n};\n\n/**\n * 解绑事件，如不传第二参数，将移除全部 eventName 的事件\n *\n * @param {string} eventName 事件名称\n * @param {function} [listener] 回调函数\n */\nconst off = (eventName: string, listener?: Listener) => {\n  handlers.remove(eventName, listener);\n\n  if (!handlers.has(eventName)) {\n    polling.stop(eventName);\n  }\n};\n\n/**\n * 触发事件\n *\n * @param {string} eventName 事件名称\n * @param {any[]} ...args 剩余参数用于传参\n */\nconst emit = (eventName: string, ...args: any[]) => {\n  emitterStorage.set(eventName, {\n    timestamp: Date.now(), // 触发时间\n    params: args || []\n  });\n};\n\n// // 销毁，全部取消轮询\n// const destroy = () => {\n//   const eventNames = Object.keys(handlers.data);\n//   eventNames.forEach(eventName => polling.stop(eventName));\n//   handlers.remove();\n// }\n\n/**\n * 设置轮询时间\n *\n * @param {string} eventName 事件名称\n * @param {number} pollingInterval 轮询时间，单位毫秒\n */\nconst setPollingInterval = (eventName: string, pollingInterval: number) => {\n  polling.setPollingInterval(eventName, pollingInterval);\n};\n\nexport { on, once, off, emit, setPollingInterval };\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__assign","assign","t","s","i","n","arguments","length","apply","this","SuppressedError","EmitterPro","handler","eventNames","keys","listeners","eventName","hasListener","listener","some","item","on","push","off","filter","emit","args","_i","forEach","once","_this","wrap","offAll","uid","getUniqueId","id","concat","Math","random","toString","substring","inWindow","window","cache","memoryStorage","getItem","key","setItem","value","removeItem","Storage","storage","options","isSupported","isSupport","e","console","error","isStorageSupported","isMemoryStorage","needParsed","keyPrefix","String","prefix","_keys","getKey","get","k","data","reviver","JSON","parse","set","replacer","stringify","del","clear","Cache","_super","namespace","opts","max","stdTTL","maxStrategy","checkperiod","cacheKey","startCheckperiod","TypeError","__","constructor","create","__extends","_check","ret","Date","now","v","_wrap","ttl","currentTtl","_isLimited","len","_getReplaceKey","cacheValues","retkey","defineProperty","enumerable","configurable","setCacheValues","values","mget","isArray","getAll","validKeys","replaceKey","mset","keyValueSet","itemSetResult","count","oldData","has","take","getTtl","getLastModified","clearTimeout","_checkTimeout","setTimeout","stopCheckperiod","Emitter","localStorage","undefined","sessionStorage","MAX_EMITTER_TIME","handlers","add","timestamp","fn","remove","emitterStorage","run","cb","curEmitter","curHandlers","_a","index","params","polling","start","pollingInterval","timer","curPolling","clearInterval","setInterval","stop","setPollingInterval","warn","isRun"],"mappings":"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","x_google_ignoreList":[0,1,2]}